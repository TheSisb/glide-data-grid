var P=Object.defineProperty;var $=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>$(e,typeof t!="symbol"?t+"":t,n);import{r as o}from"./iframe-DDQQ0Vrs.js";import{U,V as F,F as D,G as i,a as f}from"./image-window-loader-mJd1ySGt.js";import{y as d}from"./index-D_kXk1yT.js";import{s as I}from"./marked.esm-BilUkw4s.js";import{n as z}from"./throttle-BwIf-uOO.js";import{n as V}from"./flatten-rrhK1q8h.js";import{t as _,d as G}from"./throttle--dN168Gr.js";const K=(e,t,n,r)=>{switch(t){case"debounce":return G(e,n,r);case"throttle":return _(e,n,r);default:return e}},j=e=>{const t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])},L=e=>{const[t,n]=o.useState((e==null?void 0:e.current)||null);return e&&setTimeout(()=>{e.current!==t&&n(e.current)},0),{refProxy:o.useMemo(()=>new Proxy(s=>{s!==t&&n(s)},{get(s,a){return a==="current"?t:s[a]},set(s,a,g){return a==="current"?n(g):s[a]=g,!0}}),[t]),refElement:t,setRefElement:n}},q=(e,t)=>{var n,r;const s=(n=e.borderBoxSize)===null||n===void 0?void 0:n[0],a=(r=e.contentBoxSize)===null||r===void 0?void 0:r[0];return t==="border-box"&&s?{width:s.inlineSize,height:s.blockSize}:t==="content-box"&&a?{width:a.inlineSize,height:a.blockSize}:{width:e.contentRect.width,height:e.contentRect.height}};function W({skipOnMount:e=!1,refreshMode:t,refreshRate:n=1e3,refreshOptions:r,handleWidth:s=!0,handleHeight:a=!0,targetRef:g,observerOptions:b,onResize:k,disableRerender:m=!1}={}){const p=o.useRef(e),u=j(k),[c,h]=o.useState({width:void 0,height:void 0}),l=o.useRef({width:void 0,height:void 0}),{refProxy:v,refElement:y}=L(g),{box:x}=b||{},E=o.useCallback(M=>{if(!s&&!a)return;if(p.current){p.current=!1;return}const S=(C,w)=>s&&C.width!==w.width||a&&C.height!==w.height;M.forEach(C=>{const w=q(C,x);m?S(l.current,w)&&(l.current.width=w.width,l.current.height=w.height,u==null||u({width:w.width,height:w.height,entry:C})):h(N=>S(N,w)?(u==null||u({width:w.width,height:w.height,entry:C}),w):N)})},[s,a,p,x,m]),H=o.useCallback(K(E,t,n,r),[E,t,n,r]);return o.useEffect(()=>{let M;if(y)try{M=new window.ResizeObserver(H),M.observe(y,b)}catch(S){console.warn("ResizeObserver not supported or failed to initialize:",S)}else(c.width||c.height)&&(u==null||u({width:null,height:null,entry:null}),l.current.width=void 0,l.current.height=void 0,m||h({width:void 0,height:void 0}));return()=>{var S,C,w;(S=M==null?void 0:M.disconnect)===null||S===void 0||S.call(M),(w=(C=H).cancel)===null||w===void 0||w.call(C)}},[H,y]),Object.assign({ref:v},m?l.current:c)}d.seed(1337);function X(e){return!!e}function A(e,t){var r;const n=e.data;if(typeof n==typeof t.data)return{...t,data:n};switch(t.kind){case i.Uri:return z(n)?{...t,data:n[0]}:{...t,data:(n==null?void 0:n.toString())??""};case i.Boolean:return z(n)?{...t,data:n[0]!==void 0}:e.kind===i.Boolean?{...t,data:e.data}:{...t,data:!!X(n)};case i.Image:return z(n)?{...t,data:[n[0]]}:{...t,data:[(n==null?void 0:n.toString())??""]};case i.Number:return{...t,data:0};case i.Text:case i.Markdown:return z(n)?{...t,data:n[0].toString()??""}:{...t,data:((r=e.data)==null?void 0:r.toString())??""};case i.Custom:return t}}function B(e){const{getContent:t,...n}=e;return n}const se=I("div")({name:"ColumnAddButton",class:"c4uqbye",propsAsIs:!1}),Y=I("div")({name:"BeautifulStyle",class:"b1bsqg7n",propsAsIs:!1}),le=I("span")({name:"PropName",class:"piiq54i",propsAsIs:!1}),de=I("p")({name:"Description",class:"d1k3yj19",propsAsIs:!1}),ue=I("p")({name:"MoreInfo",class:"m1j0dy02",propsAsIs:!1}),ce=e=>{const{title:t,children:n,description:r,className:s,scale:a}=e,{ref:g,width:b,height:k}=W();return o.createElement(Y,{className:s+(U.value?" firefox":"")},o.createElement("h1",null,t),r,o.createElement("div",{style:{scale:a},className:"sizer"},o.createElement("div",{className:"sizer-clip",ref:g},o.createElement("div",{style:{position:"relative",width:b??100,height:k??100}},n))))};function J(e,t){return{title:`Column ${e}`,id:`Column ${e}`,group:t?`Group ${Math.round(e/3)}`:void 0,icon:f.HeaderString,hasMenu:!1,getContent:()=>{const n=d.lorem.word();return{kind:i.Text,data:n,displayData:n,allowOverlay:!0,readonly:!0}}}}function T(e,t){const n=[{title:"First name",id:"First name",group:t?"Name":void 0,icon:f.HeaderString,hasMenu:!1,getContent:()=>{const a=d.name.firstName();return{kind:i.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"Last name",id:"Last name",group:t?"Name":void 0,icon:f.HeaderString,hasMenu:!1,getContent:()=>{const a=d.name.lastName();return{kind:i.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"Avatar",id:"Avatar",group:t?"Info":void 0,icon:f.HeaderImage,hasMenu:!1,getContent:()=>{const a=Math.round(Math.random()*100);return{kind:i.Image,data:[`https://picsum.photos/id/${a}/900/900`],displayData:[`https://picsum.photos/id/${a}/40/40`],allowOverlay:!0,readonly:!0}}},{title:"Email",id:"Email",group:t?"Info":void 0,icon:f.HeaderString,hasMenu:!1,getContent:()=>{const a=d.internet.email();return{kind:i.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"Title",id:"Title",group:t?"Info":void 0,icon:f.HeaderString,hasMenu:!1,getContent:()=>{const a=d.name.jobTitle();return{kind:i.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"More Info",id:"More Info",group:t?"Info":void 0,icon:f.HeaderUri,hasMenu:!1,getContent:()=>{const a=d.internet.url();return{kind:i.Uri,displayData:a,data:a,hoverEffect:!0,allowOverlay:!0,readonly:!0,onClickUri:g=>{window.open(a,"_blank"),g.preventDefault()}}}}];if(e<n.length)return n.slice(0,e);const r=e-n.length,s=[...new Array(r)].map((a,g)=>J(g+n.length,t));return[...n,...s]}class R{constructor(){O(this,"cachedContent",new Map)}get(t,n){const r=this.cachedContent.get(t);if(r!==void 0)return r[n]}set(t,n,r){let s=this.cachedContent.get(t);s===void 0&&this.cachedContent.set(t,s=[]),s[n]=r}}function fe(e,t=!0,n=!1){const r=o.useRef(new R),[s,a]=o.useState(()=>T(e,n));o.useEffect(()=>{a(T(e,n))},[n,e]);const g=o.useCallback((c,h)=>{a(l=>{const v=l.findIndex(x=>x.title===c.title),y=[...l];return y.splice(v,1,{...l[v],width:h}),y})},[]),b=o.useMemo(()=>s.map(B),[s]),k=o.useRef(s);k.current=s;const m=o.useCallback(([c,h])=>{let l=r.current.get(c,h);return l===void 0&&(l=k.current[c].getContent(),!t&&F(l)&&(l={...l,readonly:t}),r.current.set(c,h,l)),l},[t]),p=o.useCallback(([c,h],l)=>{r.current.set(c,h,l)},[]),u=o.useCallback(([c,h],l)=>{let v=r.current.get(c,h);if(v===void 0&&(v=s[c].getContent()),D(l)&&D(v)){const y=A(l,v);r.current.set(c,h,{...y,displayData:typeof y.data=="string"?y.data:y.displayData,lastUpdated:performance.now()})}},[s]);return{cols:b,getCellContent:m,onColumnResize:g,setCellValue:u,setCellValueRaw:p}}const he=I("kbd")({name:"KeyName",class:"kcvwzr4",propsAsIs:!1}),me={smoothScrollX:!0,smoothScrollY:!1,getCellsForSelection:!0,width:"100%",height:"100%",headerHeight:24,rowHeight:22,keybindings:{search:!0},theme:{headerFontStyle:"600 0.688rem",baseFontStyle:"0.688rem",markerFontStyle:"0.688rem",editorFontSize:"0.688rem",lineHeight:1.4,cellHorizontalPadding:4,cellVerticalPadding:0,headerIconSize:16}};function we(e){switch(e.kind){case i.Boolean:return{...e,data:!1};case i.Image:return{...e,data:[],displayData:[]};case i.Drilldown:case i.Bubble:return{...e,data:[]};case i.Uri:case i.Markdown:return{...e,data:""};case i.Text:return{...e,data:"",displayData:""};case i.Number:return{...e,data:0,displayData:""}}return e}function Q(){return[{title:"Row ID",width:120,icon:f.HeaderRowID,hasMenu:!1,getContent:()=>({kind:i.RowID,data:d.datatype.uuid(),allowOverlay:!0})},{title:"Protected",width:120,icon:f.HeaderCode,hasMenu:!1,getContent:()=>({kind:i.Protected,data:d.finance.bitcoinAddress(),allowOverlay:!1})},{title:"Loading",width:120,icon:f.HeaderString,hasMenu:!1,getContent:()=>({kind:i.Loading,allowOverlay:!1,skeletonWidth:70,skeletonWidthVariability:25})},{title:"Text",width:120,icon:f.HeaderCode,hasMenu:!1,getContent:()=>{const e=d.name.firstName();return{kind:i.Text,data:e,displayData:e,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Number",width:120,icon:f.HeaderNumber,hasMenu:!1,getContent:()=>{const e=d.datatype.number(100);return{kind:i.Number,data:e,displayData:`${e}`,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Boolean",width:120,icon:f.HeaderBoolean,hasMenu:!1,getContent:()=>{const e=Math.random(),t=e<.1?void 0:e<.2?null:e<.6;return{kind:i.Boolean,data:t,allowOverlay:!1,readonly:!1}}},{title:"Image",width:120,icon:f.HeaderImage,hasMenu:!1,getContent:()=>({kind:i.Image,data:[`${d.image.animals(40,40)}?random=${d.datatype.number(1e5)}`],allowOverlay:!0,readonly:!0})},{title:"Uri",width:120,icon:f.HeaderUri,hasMenu:!1,getContent:()=>{const e=d.internet.url();return{kind:i.Uri,data:e,allowOverlay:!0,hoverEffect:!0,onClickUri:()=>{window.open(e,"_blank")}}}},{title:"Markdown",width:120,icon:f.HeaderMarkdown,hasMenu:!1,getContent:()=>{const e=`# Title
Hello my name is *${d.name.firstName()}*

## TODO:
Try out [Glide](https://www.glideapps.com/)
`;return{kind:i.Markdown,data:e,allowOverlay:!0}}},{title:"Bubble",width:120,icon:f.HeaderArray,hasMenu:!1,getContent:()=>({kind:i.Bubble,data:[d.lorem.word(),d.lorem.word(),d.lorem.word(),d.lorem.words(2),d.lorem.words(2),d.lorem.words(2)],allowOverlay:!0})},{title:"Drilldown",width:120,icon:f.HeaderArray,hasMenu:!1,getContent:()=>({kind:i.Drilldown,data:[{text:d.address.cityName(),img:`${d.image.nature(40,40)}?random=${d.datatype.number(1e5)}`},{text:d.address.cityName(),img:`${d.image.nature(40,40)}?random=${d.datatype.number(1e5)}`}],allowOverlay:!0})}]}function ge(){const e=o.useRef(new R),[t,n]=o.useState(Q),r=o.useCallback((m,p)=>{n(u=>{const c=u.findIndex(l=>l.title===m.title),h=[...u];return h.splice(c,1,{...u[c],width:p}),h})},[]),s=o.useMemo(()=>t.map(B),[t]),[a,g]=o.useState(0),b=o.useCallback(([m,p])=>{V(a);let u=e.current.get(m,p);return u===void 0&&(u=t[m].getContent(),e.current.set(m,p,u)),u},[t,a]),k=o.useCallback(([m,p],u,c,h)=>{var v;let l=e.current.get(m,p);if(l===void 0&&(l=t[m].getContent()),D(u)&&D(l)){const y=A(u,l);e.current.set(m,p,{...y,displayData:c===!0?void 0:((v=y.data)==null?void 0:v.toString())??""}),h===!0&&g(x=>x+1)}},[t]);return{cols:s,getCellContent:b,onColumnResize:r,setCellValue:k}}export{ce as B,se as C,de as D,he as K,ue as M,le as P,ge as a,Y as b,we as c,me as d,fe as u};
